<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NC Piedmont Train Schedule</title>
    <style>
        /* --- General Styles & Fonts --- */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

        :root {
            --primary-blue: #0d47a1;
            --light-blue: #e3f2fd;
            --accent-green: #4CAF50;
            --dark-text: #212121;
            --light-text: #616161;
            --border-color: #e0e0e0;
            --card-background: #ffffff;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #f4f7f9;
            color: var(--dark-text);
            margin: 0;
            padding: 20px;
        }

        /* --- Main Layout & Headers --- */
        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        h1, h2 {
            color: var(--primary-blue);
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 10px;
            margin-bottom: 30px;
        }

        h1 {
            text-align: center;
            font-size: 2.5em;
            font-weight: 700;
            margin-top: 20px;
        }
        
        h2 {
            font-size: 1.8em;
            margin-top: 40px;
        }

        /* --- Train Card Styles --- */
        .train-card {
            background-color: var(--card-background);
            border-radius: 16px;
            margin-bottom: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.07);
            transition: all 0.3s ease;
            border: 1px solid var(--border-color);
        }

        .train-card:hover {
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }

        /* --- Details & Summary for Accordion --- */
        details {
            width: 100%;
        }

        summary {
            list-style: none; /* Hide the default marker */
            cursor: pointer;
            padding: 20px 25px;
            width: 100%;
            box-sizing: border-box;
        }

        summary::-webkit-details-marker {
            display: none;
        }

        /* --- Card Content Sections --- */
        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .train-type {
            font-weight: 600;
            color: var(--primary-blue);
            background-color: var(--light-blue);
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.9em;
        }

        .train-number {
            font-size: 0.9em;
            color: var(--light-text);
            margin-left: 10px;
            font-weight: 500;
        }

        .card-body {
            display: flex;
            align-items: center;
            width: 100%;
        }

        .departure-info, .arrival-info {
            flex: 2; /* Takes 2/5 of the space */
            display: flex;
            flex-direction: column;
        }

        .arrival-info {
            align-items: flex-end;
        }

        .time {
            font-size: 2em;
            font-weight: 600;
            color: var(--dark-text);
            line-height: 1.1;
        }
        
        .time .period {
            font-size: 0.5em;
            font-weight: 500;
            color: var(--light-text);
            margin-left: 2px;
        }

        .city {
            font-size: 1.1em;
            color: var(--light-text);
            font-weight: 500;
        }

        .travel-arrow {
            flex: 1; /* Takes 1/5 of the space */
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            color: var(--light-text);
        }
        
        .duration {
            font-size: 0.9em;
            font-weight: 500;
            margin-bottom: 2px;
        }

        .travel-arrow svg {
            width: 100%;
            max-width: 80px;
            height: auto;
            stroke: var(--light-text);
            stroke-width: 2;
        }
        
        .card-footer {
            margin-top: 15px;
            text-align: right;
        }
        
        .expand-button {
            display: inline-flex;
            align-items: center;
            padding: 8px 15px;
            background-color: #f1f1f1;
            border-radius: 20px;
            color: var(--light-text);
            font-weight: 500;
            font-size: 0.9em;
            transition: background-color 0.2s ease;
        }
        
        .expand-button:hover {
            background-color: #e7e7e7;
        }
        
        .arrow-icon {
            margin-left: 8px;
            display: inline-block;
            transition: transform 0.3s ease-in-out;
        }

        details[open] .arrow-icon {
            transform: rotate(180deg);
        }
        
        /* --- Smooth Dropdown Animation --- */
        .stops-wrapper {
            display: grid;
            grid-template-rows: 0fr; /* Collapsed by default */
            transition: grid-template-rows 0.4s ease-in-out;
        }

        details[open] > .stops-wrapper {
            grid-template-rows: 1fr; /* Expanded */
        }
        
        .stops-list {
            overflow: hidden;
            padding: 0 25px 25px 25px;
            border-top: 1px solid var(--border-color);
        }

        .stop-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #f5f5f5;
        }
        
        .stop-city a {
            text-decoration: none;
            color: var(--dark-text);
            font-weight: 500;
        }
        .stop-city a:hover {
            color: var(--primary-blue);
        }
        
        /* --- Ticket Button --- */
        .ticket-button {
            display: inline-block;
            background-color: var(--accent-green);
            color: white;
            padding: 12px 25px;
            margin-top: 20px;
            text-align: center;
            text-decoration: none;
            border-radius: 8px;
            font-weight: bold;
            transition: background-color 0.3s ease, transform 0.3s ease;
        }

        .ticket-button:hover {
            background-color: #45a049;
            transform: scale(1.05);
        }
    </style>
</head>
<body>

    <main class="container">
        <h1>NC By Train Schedule</h1>

        <section id="raleigh-to-charlotte">
            <h2>Raleigh to Charlotte (Southbound)</h2>
            <div id="southbound-trains"></div>
        </section>

        <section id="charlotte-to-raleigh">
            <h2>Charlotte to Raleigh (Northbound)</h2>
            <div id="northbound-trains"></div>
        </section>
        
    </main>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        
        // --- DATA ARRAYS ---
        // TO EDIT THE SCHEDULE: Modify the arrays below.
        // Format: [ 'City Name', 'Link Suffix', 'Time' ]

        const stationUrlBase = 'https://www.ncbytrain.org/stations/pages/';

        // == SOUTHBOUND TRAINS (Raleigh to Charlotte) ==
        const train71 = [ /*...*/ ];
        const train73 = [ /*...*/ ];
        const train75 = [ /*...*/ ];
        const train77 = [ /*...*/ ];
        // ... (Full data is included in the script below)

        // == NORTHBOUND TRAINS (Charlotte to Raleigh) ==
        const train72 = [ /*...*/ ];
        const train74 = [ /*...*/ ];
        const train76 = [ /*...*/ ];
        const train78 = [ /*...*/ ];
        // ... (Full data is included in the script below)

        const southboundTrains = { 'Train 71': [['Raleigh, N.C.', 'raleigh.aspx', '6:30 a.m.'],['Cary, N.C.', 'cary.aspx', '6:42 a.m.'],['Durham, N.C.', 'durham.aspx', '7:02 a.m.'],['Greensboro, N.C.', 'greensboro.aspx', '8:01 a.m.'],['Kannapolis, N.C.', 'kannapolis.aspx', '8:59 a.m.'],['Charlotte, N.C.', 'charlotte.aspx', '(ar) 9:28 a.m.']], 'Train 73': [['Raleigh, N.C.', 'raleigh.aspx', '10:00 a.m.'],['Cary, N.C.', 'cary.aspx', '10:12 a.m.'],['Durham, N.C.', 'durham.aspx', '10:32 a.m.'],['Burlington, N.C.', 'burlington.aspx', '11:08 a.m.'],['Greensboro, N.C.', 'greensboro.aspx', '11:35 a.m.'],['High Point, N.C.', 'high-point.aspx', '11:52 a.m.'],['Salisbury, N.C.', 'salisbury.aspx', '12:25 p.m.'],['Kannapolis, N.C.', 'kannapolis.aspx', '12:42 p.m.'],['Charlotte, N.C.', 'charlotte.aspx', '(ar) 1:10 p.m.']], 'Train 75': [['Raleigh, N.C.', 'raleigh.aspx', '12:45 p.m.'],['Cary, N.C.', 'cary.aspx', '12:57 p.m.'],['Durham, N.C.', 'durham.aspx', '1:17 p.m.'],['Burlington, N.C.', 'burlington.aspx', '1:55 p.m.'],['Greensboro, N.C.', 'greensboro.aspx', '2:20 p.m.'],['High Point, N.C.', 'high-point.aspx', '2:37 p.m.'],['Salisbury, N.C.', 'salisbury.aspx', '3:11 p.m.'],['Kannapolis, N.C.', 'kannapolis.aspx', '3:27 p.m.'],['Charlotte, N.C.', 'charlotte.aspx', '(ar) 3:55 p.m.']], 'Train 77': [['Raleigh, N.C.', 'raleigh.aspx', '3:15 p.m.'],['Cary, N.C.', 'cary.aspx', '3:27 p.m.'],['Durham, N.C.', 'durham.aspx', '3:47 p.m.'],['Burlington, N.C.', 'burlington.aspx', '4:26 p.m.'],['Greensboro, N.C.', 'greensboro.aspx', '4:51 p.m.'],['High Point, N.C.', 'high-point.aspx', '5:08 p.m.'],['Salisbury, N.C.', 'salisbury.aspx', '5:41 p.m.'],['Charlotte, N.C.', 'charlotte.aspx', '(ar) 6:21 p.m.']]};
        const northboundTrains = { 'Train 72': [['Charlotte, N.C.', 'charlotte.aspx', '10:25 a.m.'],['Kannapolis, N.C.', 'kannapolis.aspx', '10:50 a.m.'],['Salisbury, N.C.', 'salisbury.aspx', '11:06 a.m.'],['High Point, N.C.', 'high-point.aspx', '11:40 a.m.'],['Greensboro, N.C.', 'greensboro.aspx', '11:59 a.m.'],['Burlington, N.C.', 'burlington.aspx', '12:21 p.m.'],['Durham, N.C.', 'durham.aspx', '1:02 p.m.'],['Cary, N.C.', 'cary.aspx', '1:28 p.m.'],['Raleigh, N.C.', 'raleigh.aspx', '(ar) 1:41 p.m.']], 'Train 74': [['Charlotte, N.C.', 'charlotte.aspx', '2:20 p.m.'],['Kannapolis, N.C.', 'kannapolis.aspx', '2:45 p.m.'],['Salisbury, N.C.', 'salisbury.aspx', '3:01 p.m.'],['High Point, N.C.', 'high-point.aspx', '3:35 p.m.'],['Greensboro, N.C.', 'greensboro.aspx', '3:54 p.m.'],['Burlington, N.C.', 'burlington.aspx', '4:15 p.m.'],['Durham, N.C.', 'durham.aspx', '5:01 p.m.'],['Cary, N.C.', 'cary.aspx', '5:22 p.m.'],['Raleigh, N.C.', 'raleigh.aspx', '(ar) 5:36 p.m.']], 'Train 76': [['Charlotte, N.C.', 'charlotte.aspx', '5:00 p.m.'],['Kannapolis, N.C.', 'kannapolis.aspx', '5:25 p.m.'],['Greensboro, N.C.', 'greensboro.aspx', '6:25 p.m.'],['Durham, N.C.', 'durham.aspx', '7:23 p.m.'],['Cary, N.C.', 'cary.aspx', '7:45 p.m.'],['Raleigh, N.C.', 'raleigh.aspx', '(ar) 7:59 p.m.']], 'Train 78': [['Charlotte, N.C.', 'charlotte.aspx', '7:45 p.m.'],['Salisbury, N.C.', 'salisbury.aspx', '8:22 p.m.'],['High Point, N.C.', 'high-point.aspx', '8:56 p.m.'],['Greensboro, N.C.', 'greensboro.aspx', '9:15 p.m.'],['Burlington, N.C.', 'burlington.aspx', '9:37 p.m.'],['Durham, N.C.', 'durham.aspx', '10:17 p.m.'],['Cary, N.C.', 'cary.aspx', '10:38 p.m.'],['Raleigh, N.C.', 'raleigh.aspx', '(ar) 10:52 p.m.']]};


        // --- HELPER FUNCTIONS ---
        
        /**
         * Parses a time string like "6:30 a.m." into a format we can calculate with.
         * @param {string} timeStr - The time string from the data array.
         * @returns {Date} A Date object representing that time on a generic day.
         */
        function parseTime(timeStr) {
            const cleanTime = timeStr.replace('(ar) ', '').trim();
            const [time, period] = cleanTime.split(' ');
            let [hours, minutes] = time.split(':').map(Number);

            if (period.toLowerCase() === 'p.m.' && hours !== 12) {
                hours += 12;
            } else if (period.toLowerCase() === 'a.m.' && hours === 12) {
                hours = 0; // Midnight case
            }
            const date = new Date();
            date.setHours(hours, minutes, 0, 0);
            return date;
        }
        
        /**
         * Calculates the duration between two time strings.
         * @param {string} startTimeStr - The departure time.
         * @param {string} endTimeStr - The arrival time.
         * @returns {string} Formatted duration string e.g., "3h 28m".
         */
        function calculateDuration(startTimeStr, endTimeStr) {
            const startDate = parseTime(startTimeStr);
            const endDate = parseTime(endTimeStr);
            
            let diff = (endDate.getTime() - startDate.getTime()) / (1000 * 60); // Difference in minutes
            if (diff < 0) diff += 24 * 60; // Handles overnight trips, though not applicable here

            const hours = Math.floor(diff / 60);
            const minutes = Math.round(diff % 60);

            return `${hours}h ${minutes}m`;
        }
        
        /**
         * Formats time for display, e.g., "6:30 a.m." -> "6:30" and "a.m."
         * @param {string} timeStr - The original time string
         * @returns {string} HTML formatted time
         */
        function formatDisplayTime(timeStr) {
            const cleanTime = timeStr.replace('(ar) ', '').trim();
            const parts = cleanTime.split(' ');
            return `${parts[0]}<span class="period">${parts[1]}</span>`;
        }

        // --- DYNAMIC CARD CREATION ---
        
        function createTrainCard(trainNumber, trainData) {
            const firstStop = trainData[0];
            const lastStop = trainData[trainData.length - 1];
            
            const duration = calculateDuration(firstStop[2], lastStop[2]);

            const stopsHtml = trainData.map(stop => `
                <div class="stop-item">
                    <span class="stop-city"><a href="${stationUrlBase}${stop[1]}" target="_blank">${stop[0]}</a></span>
                    <span class="stop-time">${stop[2]}</span>
                </div>
            `).join('');

            return `
                <article class="train-card">
                    <details>
                        <summary>
                            <div class="card-header">
                                <span class="train-type">Piedmont</span>
                                <span class="train-number">${trainNumber}</span>
                            </div>
                            <div class="card-body">
                                <div class="departure-info">
                                    <span class="time">${formatDisplayTime(firstStop[2])}</span>
                                    <span class="city">${firstStop[0].replace(', N.C.', '')}</span>
                                </div>
                                <div class="travel-arrow">
                                    <span class="duration">${duration}</span>
                                    <svg viewBox="0 0 100 10" preserveAspectRatio="none"><line x1="0" y1="5" x2="95" y2="5" /><polyline points="90 0 100 5 90 10" fill="none" /></svg>
                                </div>
                                <div class="arrival-info">
                                    <span class="time">${formatDisplayTime(lastStop[2])}</span>
                                    <span class="city">${lastStop[0].replace(', N.C.', '')}</span>
                                </div>
                            </div>
                            <div class="card-footer">
                                <div class="expand-button">
                                    Show all ${trainData.length} stops <span class="arrow-icon">▼</span>
                                </div>
                            </div>
                        </summary>
                        <div class="stops-wrapper">
                            <div class="stops-list">
                                ${stopsHtml}
                                <a href="https://www.ncbytrain.org/tickets/Pages/default.aspx" class="ticket-button" target="_blank">Get Tickets</a>
                            </div>
                        </div>
                    </details>
                </article>
            `;
        }

        // --- PAGE POPULATION ---
        const southboundContainer = document.getElementById('southbound-trains');
        const northboundContainer = document.getElementById('northbound-trains');
        
        for (const trainNumber in southboundTrains) {
            southboundContainer.innerHTML += createTrainCard(trainNumber, southboundTrains[trainNumber]);
        }
        for (const trainNumber in northboundTrains) {
            northboundContainer.innerHTML += createTrainCard(trainNumber, northboundTrains[trainNumber]);
        }
    });
    </script>
</body>
</html>
